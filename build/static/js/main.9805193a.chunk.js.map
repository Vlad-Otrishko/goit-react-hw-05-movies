{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.css","components/Rejected/Rejected.module.css","components/IdleMessage/IdleMessage.module.css","App.module.css","components/SearchBar/SearchBar.module.css","components/SearchBar/SearchBar.js","components/Modal/Modal.js","components/Loader/Loader.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Rejected/Rejected.js","components/IdleMessage/IdleMessage.js","components/ImageGallery/ImageGallery.js","services/API.js","App.js","index.js","components/Button/Button.module.css"],"names":["module","exports","SearchBar","onSubmit","useState","query","setQuery","className","s","searchbar","e","preventDefault","console","log","trim","toast","error","SearchForm","type","id","autoComplete","autoFocus","placeholder","onChange","currentTarget","value","modalRootRef","document","querySelector","Modal","modalButtonShutDown","code","props","onClose","modalClickShutDown","target","window","addEventListener","this","removeEventListener","createPortal","Overlay","onClick","children","Component","Loader","color","height","width","timeout","ImageGalleryItem","route","description","bigPicture","showModal","setShowModal","toggleModal","src","alt","Button","handleClick","wrapper","returnButton","href","returnButtonLink","Rejected","message","rejected","IdleMessage","idle","galleryApi","page","totalFound","key","url","fetch","then","res","ok","json","Promise","reject","Error","newRequest","ImageGallery","images","setImages","setError","status","setStatus","handleQuery","fetchCards","result","hits","length","updateImagesArray","catch","update","useEffect","reset","request","scrollTo","top","documentElement","scrollHeight","behavior","map","image","webformatURL","largeImageURL","tags","App","container","formQuery","autoClose","position","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.9805193a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__3I5jC\",\"ImageGalleryItem-image\":\"ImageGalleryItem_ImageGalleryItem-image__PwAWK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2Jqqa\",\"Modal\":\"Modal_Modal__2hERk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__2NIwV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rejected\":\"Rejected_rejected__2TTfP\",\"blur\":\"Rejected_blur__28prU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"idle\":\"IdleMessage_idle__13mSy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__2BetW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"SearchBar_searchbar__Z_zfB\",\"SearchForm\":\"SearchBar_SearchForm__3rVOe\",\"SearchForm-button\":\"SearchBar_SearchForm-button__1_-8s\",\"SearchForm-button-label\":\"SearchBar_SearchForm-button-label__u3Mrx\",\"SearchForm-input\":\"SearchBar_SearchForm-input__3htwk\"};","import { useState } from 'react';\r\nimport { toast } from 'react-toastify';\r\nimport s from './SearchBar.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst SearchBar = ({onSubmit}) => {\r\n  const [query, setQuery] = useState('');\r\n\r\n  const handleChange = e => {\r\n    setQuery(e.currentTarget.value);\r\n  };\r\n const handleSubmit = e => {\r\n   e.preventDefault();\r\n   console.log(query);\r\n\r\n    if (query.trim() === '') {\r\n     return toast.error('Cannot search for empty request. Please, dial in something');\r\n    }\r\n   onSubmit(query);\r\n   setQuery('');\r\n  };\r\n\r\n    return (\r\n      <header className={s.searchbar}>\r\n        <form onSubmit={handleSubmit} className={s.SearchForm }>\r\n          <button type=\"submit\" className={s['SearchForm-button']} >\r\n            <span className={s['SearchForm-button-label']}>Search</span>\r\n    </button>\r\n\r\n    <input id=\"home\"\r\n      className={s['SearchForm-input']}\r\n      type=\"text\"\r\n      autoComplete=\"off\"\r\n      autoFocus\r\n      placeholder=\"Search images and photos\"\r\n      onChange={handleChange}\r\n    />\r\n  </form>\r\n</header>\r\n    );\r\n}\r\n\r\nexport default SearchBar;\r\n\r\nSearchBar.propTypes = {\r\n  onSubmit: PropTypes.func,\r\n};\r\n","import { Component } from 'react';\r\nimport s from './Modal.module.css';\r\nimport { createPortal } from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst modalRootRef = document.querySelector('#modal-root');\r\n\r\n\r\nexport default class Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.modalButtonShutDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.modalButtonShutDown);\r\n  }\r\n\r\n  modalButtonShutDown = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.onClose();\r\n    }\r\n    };\r\n    modalClickShutDown=e => {\r\n        if (e.target!==e.currentTarget) { return }\r\n        this.props.onClose();\r\n    }\r\n\r\n    render() {\r\n\r\n      return createPortal(\r\n          <div className={s.Overlay} onClick={ this.modalClickShutDown}>\r\n          <div className={s.Modal}>{this.props.children}</div>\r\n        </div>, modalRootRef\r\n      );\r\n    }\r\n}\r\n\r\nModal.propTypes = {\r\n  onClose: PropTypes.func,\r\n};\r\n\r\n\r\n","import React from 'react';\r\nimport SpinLoader from 'react-loader-spinner';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\n\r\n// export default class App extends Component {\r\n  const Loader =()=>{\r\n    return (\r\n      <SpinLoader\r\n        type=\"Watch\"\r\n        color=\"#00BFFF\"\r\n        height={100}\r\n        width={100}\r\n        timeout={500} //0.5 secs\r\n      />\r\n    );\r\n}\r\nexport default Loader;\r\n","import { useState } from 'react';\r\nimport s from './ImageGalleryItem.module.css';\r\nimport PropTypes from 'prop-types';\r\nimport Modal from '../Modal/Modal';\r\nimport Loader from '../Loader/Loader';\r\n\r\nconst ImageGalleryItem = ({route,description,bigPicture})=>{\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  const toggleModal = () => {\r\n    setShowModal(!showModal);\r\n  };\r\n    return (\r\n      <>\r\n      <li className={s.ImageGalleryItem}>\r\n        <img\r\n          src={route}\r\n          alt={description}\r\n          data-source={bigPicture}\r\n          className={s['ImageGalleryItem-image']}\r\n          onClick={toggleModal}\r\n        />\r\n      </li>\r\n        {showModal && (<Modal onClose={toggleModal}>\r\n          <Loader/>\r\n          <img src={bigPicture} alt={description} />\r\n        </Modal>)}\r\n        </>\r\n\r\n    );\r\n}\r\n\r\nexport default ImageGalleryItem;\r\n\r\nImageGalleryItem.propTypes = {\r\n  route: PropTypes.string,\r\n  description: PropTypes.string,\r\n  bigPicture: PropTypes.string,\r\n};","import React from 'react';\r\nimport s from './Button.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Button = ({handleClick}) => {\r\n  return (\r\n    <div className={s.wrapper}>\r\n      <button type=\"button\" className={s.Button} onClick={handleClick}>\r\n        Load more\r\n      </button>\r\n      <div className={s.returnButton}>\r\n        <a href=\"#home\" className={s.returnButtonLink}>\r\n          Back\r\n        </a>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default Button;\r\n\r\nButton.propTypes = {\r\n  handleClick: PropTypes.func,\r\n};\r\n\r\n","import React from 'react';\r\nimport s from './Rejected.module.css';\r\nimport PropTypes from 'prop-types';\r\nconst Rejected = ({ message }) => {\r\n\r\n    return (<h1 className={s.rejected}>{message}</h1>\r\n    );\r\n}\r\nexport default Rejected;\r\n\r\nRejected.propTypes = {\r\n  message: PropTypes.string,\r\n};\r\n\r\n","import React from 'react';\r\nimport s from './IdleMessage.module.css';\r\nconst IdleMessage = () => {\r\n\r\n\r\n    return (<div className={s.idle}>Waiting for your valuable query to start search..</div>);\r\n}\r\nexport default IdleMessage;\r\n\r\n","import {useState, useEffect} from 'react';\r\nimport s from './ImageGallery.module.css';\r\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\r\nimport Button from '../Button/Button';\r\nimport Rejected from '../Rejected/Rejected';\r\nimport Loader from '../Loader/Loader';\r\nimport IdleMessage from '../IdleMessage/IdleMessage';\r\nimport ApiService from '../../services/API';\r\nimport PropTypes from 'prop-types';\r\nconst galleryApi = new ApiService();\r\n\r\nconst ImageGallery = ({ query }) => {\r\n\r\n\r\n  const [images, setImages] = useState([]);\r\n  const [error, setError] = useState(null);\r\n  const [status, setStatus] = useState('idle');\r\n\r\n  function handleQuery() {\r\n    galleryApi\r\n      .fetchCards()\r\n      .then(result => {\r\n        if (result.hits.length > 0) {\r\n          updateImagesArray(result.hits);\r\n          galleryApi.page += 1;\r\n          return result;\r\n        }\r\n        throw new Error(`Sorry, but no result for ${galleryApi.query}`);\r\n      })\r\n      .catch(error => { setError(error); setStatus('rejected') });\r\n  }\r\n\r\n  const updateImagesArray = update => {\r\n    setStatus('resolved');\r\n    if (galleryApi.page === 1) {\r\n      return setImages(update);\r\n    }\r\n    return setImages(images=>[...images, ...update]);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!query) return;\r\n    setStatus('pending');\r\n    galleryApi.reset();\r\n    galleryApi.request = query;\r\n    handleQuery();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [query]);\r\n\r\n  useEffect(() => {\r\n    if (images.length === 0) { return; }\r\n    // console.log('from scroll', images, images.length);\r\n    if (images.length > 12) {\r\n      window.scrollTo({\r\n        top: document.documentElement.scrollHeight,\r\n        behavior: 'smooth',\r\n      });\r\n    }\r\n}, [images]\r\n  )\r\n\r\n const  loadMore=()=> {\r\n    setStatus('pending');\r\n    handleQuery();\r\n  }\r\n\r\n    if (status === 'idle') {\r\n      return <IdleMessage/>;\r\n    }\r\n    if (status === 'pending') {\r\n      return <Loader/>;\r\n    }\r\n    if (status === 'rejected') {\r\n     return <Rejected message={error.message}/>\r\n    }\r\n    if (status === 'resolved') {\r\n      return (\r\n        <>\r\n          <ul className={s.ImageGallery}>\r\n            {images.map(image => (\r\n              <ImageGalleryItem\r\n                key={image.id}\r\n                route={image.webformatURL}\r\n                bigPicture={image.largeImageURL}\r\n                description={image.tags}\r\n              />\r\n            ))}\r\n          </ul>\r\n          <Button handleClick={loadMore} />\r\n        </>\r\n      );\r\n    }\r\n  }\r\n\r\nexport default ImageGallery;\r\n\r\nImageGallery.propTypes = {\r\n  query: PropTypes.string,\r\n};\r\n\r\n","export default class ApiService {\r\n  constructor() {\r\n    this.query = '';\r\n    this.page = 1;\r\n    this.totalFound = 0;\r\n    this.key = '22940858-92f18eb28c187ec286dac5649';\r\n  }\r\n  fetchCards() {\r\n    const url = `https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=${this.query}&page=${this.page}&per_page=12&key=${this.key}`;\r\n    return fetch(url)\r\n      .then(res => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject(\r\n          new Error(`No data for the query'${this.query}'`),\r\n        );\r\n      })\r\n  }\r\n\r\n  reset() {\r\n    this.page = 1;\r\n    this.totalFound = 0;\r\n  }\r\n  set request(newRequest) {\r\n    this.query = newRequest;\r\n  }\r\n}\r\n","\nimport {useState } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport SearchBar from './components/SearchBar/SearchBar';\nimport ImageGallery from './components/ImageGallery/ImageGallery';\nimport s from './App.module.css';\n\nconst App = () => {\n  const [query, setQuery] = useState('');\n  \n  const formSubmitHandler = formQuery => {\n    setQuery(formQuery);\n  }\n    \n\n  \n  return (\n    <div className={s.container}>\n      <SearchBar onSubmit={formSubmitHandler} />\n      <ToastContainer autoClose={3000} position=\"top-right\" />\n     <ImageGallery query={query} /> \n    </div>\n  );\n };\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Button_wrapper__3TOly\",\"Button\":\"Button_Button__FbAXw\",\"returnButton\":\"Button_returnButton__3zLzd\",\"returnButtonLink\":\"Button_returnButtonLink__3ea5c\"};"],"sourceRoot":""}